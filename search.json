[{"path":"https://ifoa-adswp.github.io/IBLM/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Karol Gawlowski Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Karol Gawlowski. Author, maintainer, copyright holder. Paul Beard. Author.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gawlowski K, Beard P (2025). IBLM: Interpretable Boosted Linear Models. R package version 1.0.0, https://ifoa-adswp.github.io/IBLM/.","code":"@Manual{,   title = {IBLM: Interpretable Boosted Linear Models},   author = {Karol Gawlowski and Paul Beard},   year = {2025},   note = {R package version 1.0.0},   url = {https://ifoa-adswp.github.io/IBLM/}, }"},{"path":[]},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"overview","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"Overview","title":"Interpretable Boosted Linear Models","text":"IBLM implements Interpretable Boosted Linear Models ‚Äî hybrid modelling approach combines transparency generalized linear models (GLMs) predictive power gradient boosting. package provides: Functions fitting interpretable boosted linear models Tools analyze visualize model results Support model comparison diagnostics","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"installation","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"Installation","title":"Interpretable Boosted Linear Models","text":"can install released version IBLM CRAN: can install development version GitHub:","code":"install.packages(\"IBLM\") # install.packages(\"remotes\") remotes::install_github(\"IFoA-ADSWP/IBLM\")"},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"example","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"Example","title":"Interpretable Boosted Linear Models","text":"‚Äôs minimal example train explain IBLM:","code":"library(IBLM)  df_list <- freMTPL2freq |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  ex <- explain_iblm(iblm_model, df_list$test)"},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"documentation","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"Documentation","title":"Interpretable Boosted Linear Models","text":"Documentation various functions package visit: üîó https://ifoa-adswp.github.io/IBLM/","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"contributing","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"Contributing","title":"Interpretable Boosted Linear Models","text":"Contributions welcome! ‚Äôd like report bug suggest feature, please open issue GitHub: üîó https://github.com/IFoA-ADSWP/IBLM/issues","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"citation","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"Citation","title":"Interpretable Boosted Linear Models","text":"use IBLM research teaching, please cite : Gawlowski, K. Beard, P. (2025). IBLM: Interpretable Boosted Linear Models. R package version 1.0.0.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/index.html","id":"license","dir":"","previous_headings":"Interpretable Boosted Linear Models","what":"License","title":"Interpretable Boosted Linear Models","text":"package licensed MIT License. See LICENSE file full details.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_density.html","id":null,"dir":"Reference","previous_headings":"","what":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","title":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","text":"Generates density plot showing distribution corrected Beta values GLM coefficient, along original Beta coefficient, standard error bounds around . NOTE function signature documents interface functions created create_beta_corrected_density.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_density.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","text":"","code":"beta_corrected_density(varname, q = 0.05, type = \"kde\")"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_density.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","text":"varname Character string specifying variable name coefficient name accepted well. q Number, must 0 0.5. Determines quantile range plot (.e. value 0.05 show shaps within 5pct ‚Äì> 95pct quantile range plot) type Character string, must \"kde\" \"hist\"","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_density.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","text":"ggplot object(s) showing density distribution corrected beta coefficients vertical lines indicating original coefficient value standard error bounds. item returned : single ggplot object `varname` numerical variable coefficient name list ggplot objects `varname` categorical variable","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_density.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","text":"plot shows: Density curve corrected coefficient values Solid vertical line original GLM coefficient Dashed lines plus/minus 1 standard error coefficient Automatic x-axis limits cut highest lowest q pct. want axis unaltered, set q = 0","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_density.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Density Plot of Beta Corrections for a Variable ‚Äî beta_corrected_density","text":"","code":"# This function is created inside explain_iblm() and is output as an item  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  explain_objects <- explain_iblm(iblm_model, df_list$test)  # plot can be for a categorical variable (produces list of plots, one for each level) explain_objects$beta_corrected_density(varname = \"Area\") #> $AreaB  #>  #> $AreaC  #>  #> $AreaD  #>  #> $AreaE  #>  #> $AreaF  #>   # plot can be for a single categorical level explain_objects$beta_corrected_density(varname = \"AreaB\")   # output can be numerical variable explain_objects$beta_corrected_density(varname = \"DrivAge\")    # This function must be created, and cannot be called directly from the package try( beta_corrected_density(varname = \"DrivAge\") ) #> Error in beta_corrected_density(varname = \"DrivAge\") :  #>   This function documents the interface only and cannot be called #> directly. Instead, try one of the following #> ‚Ñπ Use explain_iblm()$beta_corrected_density() #> ‚Ñπ Call a function output from create_beta_corrected_density()"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_scatter.html","id":null,"dir":"Reference","previous_headings":"","what":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","title":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","text":"Generates scatter plot boxplot showing SHAP corrections specified variable fitted model. numerical variables, creates scatter plot optional coloring marginal densities. categorical variables, creates boxplot model coefficients overlaid. NOTE function signature documents interface functions created create_beta_corrected_scatter.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_scatter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","text":"","code":"beta_corrected_scatter(varname, q = 0, color = NULL, marginal = FALSE)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_scatter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","text":"varname Character. Name variable plot SHAP corrections . Must present fitted model. q Numeric. Quantile threshold outlier removal. 0 (default) function remove outliers color Character NULL. Name variable use point coloring. Must present model. Currently supported categorical variables. marginal Logical. Whether add marginal density plots (numerical variables ).","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_scatter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","text":"ggplot2 object. numerical variables: scatter plot SHAP corrections,   model coefficient line, confidence bands. categorical variables: boxplot   coefficient points overlaid.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_scatter.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","text":"function handles numerical categorical variables differently: Numerical: Creates scatter plot variable values vs. beta + SHAP deviations Categorical: Creates boxplot SHAP deviations level coefficient overlay numerical variables, horizontal lines show model coefficient (solid) confidence intervals (dashed). SHAP corrections represent local deviations global model coefficient.","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrected_scatter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scatter Plot of Beta Corrections for a Variable ‚Äî beta_corrected_scatter","text":"","code":"# This function is created inside explain_iblm() and is output as an item  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  explain_objects <- explain_iblm(iblm_model, df_list$test)  # plot can be for a categorical variable (box plot) explain_objects$beta_corrected_scatter(varname = \"Area\")   # plot can be for a numerical variable (scatter plot) explain_objects$beta_corrected_scatter(varname = \"DrivAge\") #> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'    # This function must be created, and cannot be called directly from the package try( beta_corrected_scatter(varname = \"DrivAge\") ) #> Error in beta_corrected_scatter(varname = \"DrivAge\") :  #>   This function documents the interface only and cannot be called #> directly. Instead, try one of the following #> ‚Ñπ Use explain_iblm()$beta_corrected_scatter() #> ‚Ñπ Call a function output from create_beta_corrected_scatter()"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrections_derive.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Beta Corrections based on SHAP values ‚Äî beta_corrections_derive","title":"Compute Beta Corrections based on SHAP values ‚Äî beta_corrections_derive","text":"Processes SHAP values one-hot (wide) format create beta coefficient corrections. includes: scaling shap values continuous variables predictor value row migrating shap values bias continuous variables predictor value zero migrating shap values bias categorical variables predictor value reference level","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrections_derive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Beta Corrections based on SHAP values ‚Äî beta_corrections_derive","text":"","code":"beta_corrections_derive(   shap_wide,   wide_input_frame,   iblm_model,   migrate_reference_to_bias = TRUE )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrections_derive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Beta Corrections based on SHAP values ‚Äî beta_corrections_derive","text":"shap_wide Data frame containing SHAP values XGBoost converted wide format [shap_to_onehot()] wide_input_frame Wide format input data frame (one-hot encoded). iblm_model Object class 'iblm' migrate_reference_to_bias Logical, migrate beta corrections bias reference levels? applied categorical vars . recommended leave setting TRUE","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrections_derive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Beta Corrections based on SHAP values ‚Äî beta_corrections_derive","text":"data frame booster model beta corrections one-hot (wide) format","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/beta_corrections_derive.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Beta Corrections based on SHAP values ‚Äî beta_corrections_derive","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  shap <- stats::predict(   iblm_model$booster_model,   newdata = xgboost::xgb.DMatrix(     data.matrix(       dplyr::select(df_list$test, -dplyr::all_of(iblm_model$response_var))     )   ),   predcontrib = TRUE ) |> data.frame()  wide_input_frame <- data_to_onehot(df_list$test, iblm_model)  shap_wide <- shap_to_onehot(shap, wide_input_frame, iblm_model)  beta_corrections <- beta_corrections_derive(shap_wide, wide_input_frame, iblm_model)  beta_corrections |> dplyr::glimpse() #> Rows: 1,529 #> Columns: 47 #> $ bias          <dbl> -0.153347723, -0.027749969, -0.012299433, -0.041507296, ‚Ä¶ #> $ VehPower      <dbl> -0.0025138523, -0.0002563855, 0.0028016646, -0.002569615‚Ä¶ #> $ VehAge        <dbl> -0.0806419477, -0.3338305056, 0.0007959833, -0.434525936‚Ä¶ #> $ DrivAge       <dbl> -1.660853e-03, -1.586508e-03, 1.069323e-03, -2.835895e-0‚Ä¶ #> $ BonusMalus    <dbl> -1.736847e-05, -8.126060e-05, -7.244720e-05, -7.747109e-‚Ä¶ #> $ Density       <dbl> 1.082473e-05, -6.616692e-06, -5.356217e-04, 2.438393e-06‚Ä¶ #> $ AreaA         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ AreaB         <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ AreaC         <dbl> 0.0000000000, 0.0000000000, 0.0001548524, 0.0000000000, ‚Ä¶ #> $ AreaD         <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ AreaE         <dbl> 0.0001598864, 0.0001624475, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ AreaF         <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0001354491, ‚Ä¶ #> $ VehBrandB1    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB10   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB11   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB12   <dbl> 0.00000000, -0.01969582, 0.00000000, -0.04096698, 0.0000‚Ä¶ #> $ VehBrandB13   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB14   <dbl> 0.00000000, 0.00000000, -0.05115313, 0.00000000, 0.00000‚Ä¶ #> $ VehBrandB2    <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, -0.03359‚Ä¶ #> $ VehBrandB3    <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ VehBrandB4    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB5    <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ VehBrandB6    <dbl> 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0‚Ä¶ #> $ VehGasDiesel  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehGasRegular <dbl> -0.041055299, 0.000000000, 0.000000000, 0.000000000, -0.‚Ä¶ #> $ RegionR11     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR21     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR22     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR23     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR24     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR25     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR26     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR31     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR41     <dbl> 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0‚Ä¶ #> $ RegionR42     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR43     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR52     <dbl> 0.00000000, 0.00000000, 0.02148633, 0.00000000, 0.000000‚Ä¶ #> $ RegionR53     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR54     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.019883‚Ä¶ #> $ RegionR72     <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ RegionR73     <dbl> 0.00000000, -0.02865498, 0.00000000, 0.00000000, 0.00000‚Ä¶ #> $ RegionR74     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR82     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR83     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR91     <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ RegionR93     <dbl> 0.05905953, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR94     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/bias_density.html","id":null,"dir":"Reference","previous_headings":"","what":"Density Plot of Bias Corrections from SHAP values ‚Äî bias_density","title":"Density Plot of Bias Corrections from SHAP values ‚Äî bias_density","text":"Visualizes distribution SHAP corrections migrated bias terms, showing per-variable total bias corrections. NOTE function signature documents interface functions created create_bias_density.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/bias_density.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Density Plot of Bias Corrections from SHAP values ‚Äî bias_density","text":"","code":"bias_density(q = 0, type = \"hist\")"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/bias_density.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Density Plot of Bias Corrections from SHAP values ‚Äî bias_density","text":"q Numeric value 0 0.5 quantile bounds. higher number trim edges (useful outliers distorting plot window) Default 0 (.e. trimming) type Character string specifying plot type: \"kde\" kernel density \"hist\" histogram. Default \"hist\".","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/bias_density.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Density Plot of Bias Corrections from SHAP values ‚Äî bias_density","text":"list two ggplot objects: bias_correction_var: Faceted plot showing bias correction density variable.     Note variables records contributing bias correction dropped plot. bias_correction_total: Plot showing total corrected bias density.","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/bias_density.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Density Plot of Bias Corrections from SHAP values ‚Äî bias_density","text":"","code":"# This function is created inside explain_iblm() and is output as an item  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  explain_objects <- explain_iblm(iblm_model, df_list$test)  explain_objects$bias_density() #> $bias_correction_var  #>  #> $bias_correction_total  #>    # This function must be created, and cannot be called directly from the package try( bias_density() ) #> Error in bias_density() :  #>   This function documents the interface only and cannot be called #> directly. Instead, try one of the following #> ‚Ñπ Use explain_iblm()$bias_density() #> ‚Ñπ Call a function output from create_bias_density()"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_data_variability.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Data Variability for Modeling ‚Äî check_data_variability","title":"Check Data Variability for Modeling ‚Äî check_data_variability","text":"Validates response variable predictor variables one unique value.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_data_variability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Data Variability for Modeling ‚Äî check_data_variability","text":"","code":"check_data_variability(data, response_var)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_data_variability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Data Variability for Modeling ‚Äî check_data_variability","text":"data data frame containing variables check. response_var Character string naming response variable `data`.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_data_variability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Data Variability for Modeling ‚Äî check_data_variability","text":"Invisibly returns `TRUE` checks pass, otherwise throws error.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_iblm_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Object of Class `iblm` ‚Äî check_iblm_model","title":"Check Object of Class `iblm` ‚Äî check_iblm_model","text":"Validates iblm model object required structure features","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_iblm_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Object of Class `iblm` ‚Äî check_iblm_model","text":"","code":"check_iblm_model(model, booster_models_supported = c(\"xgb.Booster\"))"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_iblm_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Object of Class `iblm` ‚Äî check_iblm_model","text":"model Model object validate, expected class \"iblm\" booster_models_supported Booster model classes currently supported iblm package","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_iblm_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Object of Class `iblm` ‚Äî check_iblm_model","text":"Invisible TRUE checks pass","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/check_iblm_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Object of Class `iblm` ‚Äî check_iblm_model","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  check_iblm_model(iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/correction_corridor.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot GLM vs IBLM Predictions with Different Corridors ‚Äî correction_corridor","title":"Plot GLM vs IBLM Predictions with Different Corridors ‚Äî correction_corridor","text":"Creates faceted scatter plot comparing GLM predictions ensemble predictions across different trim values, showing ensemble corrects base GLM model.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/correction_corridor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot GLM vs IBLM Predictions with Different Corridors ‚Äî correction_corridor","text":"","code":"correction_corridor(   iblm_model,   data,   trim_vals = c(NA_real_, 4, 1, 0.2, 0.1, 0),   sample_perc = 0.2,   color = NA,   ... )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/correction_corridor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot GLM vs IBLM Predictions with Different Corridors ‚Äî correction_corridor","text":"iblm_model IBLM model object class \"iblm\". data Data frame. used `split_into_train_validate_test()` usually \"test\" portion data. trim_vals Numeric vector trim values compare. length vector dictate . facets shown plot output sample_perc Proportion data randomly sample plotting (0 1). Default 0.2 improve performance large datasets color Optional. Name variable `data` color points ... Additional arguments passed `geom_point()`","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/correction_corridor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot GLM vs IBLM Predictions with Different Corridors ‚Äî correction_corridor","text":"ggplot object showing GLM vs IBLM predictions faceted trim value.   diagonal line (y = x) represents perfect agreement models","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/correction_corridor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot GLM vs IBLM Predictions with Different Corridors ‚Äî correction_corridor","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  correction_corridor(iblm_model = iblm_model, data = df_list$test, color = \"DrivAge\")"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_density.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Pre-Configured Beta Corrected Density Plot Function ‚Äî create_beta_corrected_density","title":"Create Pre-Configured Beta Corrected Density Plot Function ‚Äî create_beta_corrected_density","text":"Factory function returns plotting function data pre-configured.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_density.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Pre-Configured Beta Corrected Density Plot Function ‚Äî create_beta_corrected_density","text":"","code":"create_beta_corrected_density(   wide_input_frame,   beta_corrections,   data,   iblm_model )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_density.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Pre-Configured Beta Corrected Density Plot Function ‚Äî create_beta_corrected_density","text":"wide_input_frame Dataframe. Wide format input data (one-hot encoded). beta_corrections Dataframe. Output beta_corrections_derive. data Dataframe. testing data. iblm_model Object class 'iblm'.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_density.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Pre-Configured Beta Corrected Density Plot Function ‚Äî create_beta_corrected_density","text":"Function signature function(varname, q = 0.05, type = \"kde\").","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_density.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Pre-Configured Beta Corrected Density Plot Function ‚Äî create_beta_corrected_density","text":"","code":"# ------- prepare iblm objects required -------  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  test_data <- df_list$test shap <- extract_booster_shap(iblm_model$booster_model, test_data) wide_input_frame <- data_to_onehot(test_data, iblm_model) shap_wide <- shap_to_onehot(shap, wide_input_frame, iblm_model) beta_corrections <- beta_corrections_derive(shap_wide, wide_input_frame, iblm_model)  # ------- demonstration of functionality -------  # create_beta_corrected_density() can create function of type 'beta_corrected_density' my_beta_corrected_density <- create_beta_corrected_density(   wide_input_frame,   beta_corrections,   test_data,   iblm_model )  # this custom function then acts as per beta_corrected_density() my_beta_corrected_density(varname = \"VehAge\")"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_scatter.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Pre-Configured Beta Corrected Scatter Plot Function ‚Äî create_beta_corrected_scatter","title":"Create Pre-Configured Beta Corrected Scatter Plot Function ‚Äî create_beta_corrected_scatter","text":"Factory function returns plotting function data pre-configured.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_scatter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Pre-Configured Beta Corrected Scatter Plot Function ‚Äî create_beta_corrected_scatter","text":"","code":"create_beta_corrected_scatter(data_beta_coeff, data, iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_scatter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Pre-Configured Beta Corrected Scatter Plot Function ‚Äî create_beta_corrected_scatter","text":"data_beta_coeff Dataframe. Contains corrected beta coefficients row data. data Dataframe. testing data. iblm_model Object class 'iblm'.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_scatter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Pre-Configured Beta Corrected Scatter Plot Function ‚Äî create_beta_corrected_scatter","text":"Function signature function(varname, q = 0, color = NULL, marginal = FALSE).","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_beta_corrected_scatter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Pre-Configured Beta Corrected Scatter Plot Function ‚Äî create_beta_corrected_scatter","text":"","code":"# ------- prepare iblm objects required -------  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  test_data <- df_list$test shap <- extract_booster_shap(iblm_model$booster_model, test_data) wide_input_frame <- data_to_onehot(test_data, iblm_model) shap_wide <- shap_to_onehot(shap, wide_input_frame, iblm_model) beta_corrections <- beta_corrections_derive(shap_wide, wide_input_frame, iblm_model) data_glm <- data_beta_coeff_glm(test_data, iblm_model) data_booster <- data_beta_coeff_booster(test_data, beta_corrections, iblm_model) data_beta_coeff <- data_glm + data_booster  # ------- demonstration of functionality -------  # create_beta_corrected_scatter() can create function of type 'beta_corrected_scatter' my_beta_corrected_scatter <- create_beta_corrected_scatter(data_beta_coeff, test_data, iblm_model)  # this custom function then acts as per beta_corrected_scatter() my_beta_corrected_scatter(varname = \"VehAge\") #> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_bias_density.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Pre-Configured Bias Density Plot Function ‚Äî create_bias_density","title":"Create Pre-Configured Bias Density Plot Function ‚Äî create_bias_density","text":"Factory function returns plotting function data pre-configured.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_bias_density.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Pre-Configured Bias Density Plot Function ‚Äî create_bias_density","text":"","code":"create_bias_density(shap, data, iblm_model, migrate_reference_to_bias = TRUE)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_bias_density.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Pre-Configured Bias Density Plot Function ‚Äî create_bias_density","text":"shap Dataframe. Contains raw SHAP values. data Dataframe. testing data. iblm_model Object class 'iblm'. migrate_reference_to_bias TRUE/FALSE determines whether shap values categorical reference levels migrated bias? Default TRUE","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_bias_density.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Pre-Configured Bias Density Plot Function ‚Äî create_bias_density","text":"Function signature function(q = 0, type = \"hist\").","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_bias_density.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Pre-Configured Bias Density Plot Function ‚Äî create_bias_density","text":"","code":"# ------- prepare iblm objects required -------  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  test_data <- df_list$test shap <- extract_booster_shap(iblm_model$booster_model, test_data)  # ------- demonstration of functionality -------  # create_bias_density() can create function of type 'bias_density' my_bias_density <- create_bias_density(shap, test_data, iblm_model)  # this custom function then acts as per bias_density() my_bias_density() #> $bias_correction_var  #>  #> $bias_correction_total  #>"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_overall_correction.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Pre-Configured Overall Correction Plot Function ‚Äî create_overall_correction","title":"Create Pre-Configured Overall Correction Plot Function ‚Äî create_overall_correction","text":"Factory function returns plotting function data pre-configured.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_overall_correction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Pre-Configured Overall Correction Plot Function ‚Äî create_overall_correction","text":"","code":"create_overall_correction(shap, iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_overall_correction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Pre-Configured Overall Correction Plot Function ‚Äî create_overall_correction","text":"shap Dataframe. Contains raw SHAP values. iblm_model Object class 'iblm'.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_overall_correction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Pre-Configured Overall Correction Plot Function ‚Äî create_overall_correction","text":"Function signature function(transform_x_scale_by_link = TRUE).","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/create_overall_correction.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Pre-Configured Overall Correction Plot Function ‚Äî create_overall_correction","text":"","code":"# ------- prepare iblm objects required -------  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  test_data <- df_list$test shap <- extract_booster_shap(iblm_model$booster_model, test_data)  # ------- demonstration of functionality -------  # create_overall_correction() can create function of type 'overall_correction' my_overall_correction <- create_overall_correction(shap, iblm_model)  # this custom function then acts as per overall_correction() my_overall_correction()"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_booster.html","id":null,"dir":"Reference","previous_headings":"","what":"Obtain Booster Model Beta Corrections for tabular data ‚Äî data_beta_coeff_booster","title":"Obtain Booster Model Beta Corrections for tabular data ‚Äî data_beta_coeff_booster","text":"Creates dataframe Shap beta corrections row predictor variable `data`","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_booster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Obtain Booster Model Beta Corrections for tabular data ‚Äî data_beta_coeff_booster","text":"","code":"data_beta_coeff_booster(data, beta_corrections, iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_booster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Obtain Booster Model Beta Corrections for tabular data ‚Äî data_beta_coeff_booster","text":"data data frame containing dataset analysis beta_corrections data frame matrix containing beta correction values variables bias iblm_model Object class 'iblm'","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_booster.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Obtain Booster Model Beta Corrections for tabular data ‚Äî data_beta_coeff_booster","text":"data frame beta coefficient corrections. structure dimension `data` except \"bias\" column start.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_booster.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Obtain Booster Model Beta Corrections for tabular data ‚Äî data_beta_coeff_booster","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  explainer_outputs <- explain_iblm(iblm_model, df_list$test)  data_booster <- data_beta_coeff_booster(   df_list$test,   explainer_outputs$beta_corrections,   iblm_model )  data_booster |> dplyr::glimpse() #> Rows: 1,576 #> Columns: 10 #> $ bias       <dbl> -0.025434082, -0.006251727, -0.022657538, -0.025341228, 0.0‚Ä¶ #> $ Area       <dbl> -2.554945e-04, 0.000000e+00, -7.595460e-05, 9.323163e-04, -‚Ä¶ #> $ VehPower   <dbl> -2.374930e-04, 4.219632e-04, -6.127541e-04, -3.928683e-04, ‚Ä¶ #> $ VehAge     <dbl> 0.001318635, -0.043659166, 0.001579206, -0.007951507, 0.004‚Ä¶ #> $ DrivAge    <dbl> 1.050773e-04, -7.719393e-04, -4.158568e-04, 2.466124e-04, 1‚Ä¶ #> $ BonusMalus <dbl> -1.222275e-04, 1.286478e-04, -1.136246e-04, -6.451709e-05, ‚Ä¶ #> $ VehBrand   <dbl> -0.042301517, 0.000000000, -0.042444725, -0.018660093, 0.00‚Ä¶ #> $ VehGas     <dbl> -0.0019267000, 0.0000000000, 0.0000000000, -0.0009197969, 0‚Ä¶ #> $ Density    <dbl> -1.965189e-07, -4.796051e-04, 4.612441e-05, 2.649536e-07, 7‚Ä¶ #> $ Region     <dbl> 0.000000e+00, -6.447542e-04, -1.102487e-04, 0.000000e+00, -‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_glm.html","id":null,"dir":"Reference","previous_headings":"","what":"Obtain GLM Beta Coefficients for tabular data ‚Äî data_beta_coeff_glm","title":"Obtain GLM Beta Coefficients for tabular data ‚Äî data_beta_coeff_glm","text":"Creates dataframe GLM beta coefficients row predictor variable `data`","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_glm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Obtain GLM Beta Coefficients for tabular data ‚Äî data_beta_coeff_glm","text":"","code":"data_beta_coeff_glm(data, iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_glm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Obtain GLM Beta Coefficients for tabular data ‚Äî data_beta_coeff_glm","text":"data Data frame predictor variables iblm_model Object class 'iblm'","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_glm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Obtain GLM Beta Coefficients for tabular data ‚Äî data_beta_coeff_glm","text":"data frame beta coefficients. structure dimension `data` except \"bias\" column start.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_beta_coeff_glm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Obtain GLM Beta Coefficients for tabular data ‚Äî data_beta_coeff_glm","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  data_glm <- data_beta_coeff_glm(df_list$train, iblm_model)  data_glm |> dplyr::glimpse() #> Rows: 6,899 #> Columns: 10 #> $ bias       <dbl> -4.14901, -4.14901, -4.14901, -4.14901, -4.14901, -4.14901,‚Ä¶ #> $ Area       <dbl> 0.01954958, 0.01954958, 0.16478629, 0.00000000, 0.42368526,‚Ä¶ #> $ VehPower   <dbl> 0.02821266, 0.02821266, 0.02821266, 0.02821266, 0.02821266,‚Ä¶ #> $ VehAge     <dbl> -0.03750811, -0.03750811, -0.03750811, -0.03750811, -0.0375‚Ä¶ #> $ DrivAge    <dbl> 0.003999047, 0.003999047, 0.003999047, 0.003999047, 0.00399‚Ä¶ #> $ BonusMalus <dbl> 0.01728831, 0.01728831, 0.01728831, 0.01728831, 0.01728831,‚Ä¶ #> $ VehBrand   <dbl> 0.475628816, 0.000000000, 0.983076117, 0.000000000, 0.00000‚Ä¶ #> $ VehGas     <dbl> 0.2928369, 0.2928369, 0.2928369, 0.0000000, 0.0000000, 0.00‚Ä¶ #> $ Density    <dbl> 2.986686e-05, 2.986686e-05, 2.986686e-05, 2.986686e-05, 2.9‚Ä¶ #> $ Region     <dbl> 0.0000000, 0.1928121, 0.5125832, 0.4690487, 0.1767907, 0.51‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_to_onehot.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Data Frame to Wide One-Hot Encoded Format ‚Äî data_to_onehot","title":"Convert Data Frame to Wide One-Hot Encoded Format ‚Äî data_to_onehot","text":"Transforms categorical variables data frame one-hot encoded format","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_to_onehot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Data Frame to Wide One-Hot Encoded Format ‚Äî data_to_onehot","text":"","code":"data_to_onehot(data, iblm_model, remove_target = TRUE)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_to_onehot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Data Frame to Wide One-Hot Encoded Format ‚Äî data_to_onehot","text":"data Input data frame transformed. typically \"train\" data subset iblm_model Object class 'iblm' remove_target Logical, whether remove response_var variable output (default TRUE).","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_to_onehot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Data Frame to Wide One-Hot Encoded Format ‚Äî data_to_onehot","text":"data frame wide format one-hot encoded categorical variables, intercept column, variables ordered according \"coeff_names$\" `iblm_model`","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/data_to_onehot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Data Frame to Wide One-Hot Encoded Format ‚Äî data_to_onehot","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  wide_input_frame <- data_to_onehot(df_list$test, iblm_model)  wide_input_frame |> dplyr::glimpse() #> Rows: 1,508 #> Columns: 47 #> $ `(Intercept)` <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,‚Ä¶ #> $ VehPower      <int> 7, 7, 4, 5, 6, 7, 10, 6, 6, 5, 8, 6, 5, 5, 5, 6, 4, 8, 7‚Ä¶ #> $ VehAge        <dbl> 1, 12, 15, 4, 14, 1, 15, 18, 14, 0, 3, 2, 3, 9, 12, 15, ‚Ä¶ #> $ DrivAge       <int> 28, 47, 19, 76, 76, 47, 38, 41, 44, 58, 37, 37, 41, 38, ‚Ä¶ #> $ BonusMalus    <int> 57, 50, 100, 55, 50, 50, 95, 50, 50, 50, 50, 54, 50, 50,‚Ä¶ #> $ Density       <int> 37, 295, 176, 1054, 203, 3724, 139, 2575, 30, 48, 3744, ‚Ä¶ #> $ AreaA         <int> 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0,‚Ä¶ #> $ AreaB         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ AreaC         <int> 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0,‚Ä¶ #> $ AreaD         <int> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,‚Ä¶ #> $ AreaE         <int> 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1,‚Ä¶ #> $ AreaF         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB1    <int> 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1,‚Ä¶ #> $ VehBrandB10   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB11   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB12   <int> 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB13   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB14   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB2    <int> 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB3    <int> 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB4    <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,‚Ä¶ #> $ VehBrandB5    <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,‚Ä¶ #> $ VehBrandB6    <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehGasDiesel  <int> 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0,‚Ä¶ #> $ VehGasRegular <int> 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1,‚Ä¶ #> $ RegionR11     <int> 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR21     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR22     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR23     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR24     <int> 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0,‚Ä¶ #> $ RegionR25     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR26     <int> 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR31     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR41     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,‚Ä¶ #> $ RegionR42     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR43     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR52     <int> 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR53     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR54     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR72     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR73     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR74     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR82     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,‚Ä¶ #> $ RegionR83     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR91     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR93     <int> 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,‚Ä¶ #> $ RegionR94     <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/explain_iblm.html","id":null,"dir":"Reference","previous_headings":"","what":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","title":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","text":"Creates list explains beta values, corrections, ensemble IBLM model","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/explain_iblm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","text":"","code":"explain_iblm(iblm_model, data, migrate_reference_to_bias = TRUE)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/explain_iblm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","text":"iblm_model object class 'iblm'. output `train_iblm_xgb()` data Data frame. used `split_into_train_validate_test()` \"test\" portion data. migrate_reference_to_bias Logical, migrate beta corrections bias reference levels? applied categorical vars . recommended leave setting TRUE","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/explain_iblm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","text":"list containing: beta_corrected_scatter Function create scatter plots showing SHAP corrections vs variable values (see beta_corrected_scatter) beta_corrected_density Function create density plots SHAP corrections variables (see beta_corrected_density) bias_density Function create density plots SHAP corrections migrated bias (see bias_density) overall_correction Function show global correction distributions (see overall_correction) shap Dataframe showing raw SHAP values data records beta_corrections Dataframe showing beta corrections (wide/one-hot format) data records data_beta_coeff Dataframe showing beta coefficients data records","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/explain_iblm.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","text":"following outputs functions can called create plots: beta_corrected_scatter beta_corrected_density bias_density overall_correction , key data arguments (e.g. data, shap, iblm_model) already populated `explain_iblm()`. calling functions output `explain_iblm()` key settings like variable names, colours...etc need populating.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/explain_iblm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Explain GLM Model Predictions Using SHAP Values ‚Äî explain_iblm","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  ex <- explain_iblm(iblm_model, df_list$test)  # the output contains functions that can be called to visualise iblm ex$beta_corrected_scatter(\"DrivAge\") #> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'  ex$beta_corrected_density(\"DrivAge\")  ex$overall_correction()  ex$bias_density() #> $bias_correction_var  #>  #> $bias_correction_total  #>   # the output contains also dataframes ex$shap |> dplyr::glimpse() #> Rows: 1,504 #> Columns: 10 #> $ Area       <dbl> -4.420592e-03, 7.167869e-03, 1.277910e-03, -1.752530e-03, -‚Ä¶ #> $ VehPower   <dbl> -0.101024754, -0.022236679, 0.069365285, 0.066048354, -0.07‚Ä¶ #> $ VehAge     <dbl> 0.28501227, -0.23964885, -0.36630315, -0.23528025, 0.126024‚Ä¶ #> $ DrivAge    <dbl> -0.0074079135, -0.1047678739, -0.0132902926, -0.0626970381,‚Ä¶ #> $ BonusMalus <dbl> -0.11848826, -0.02782164, -0.09015803, 0.06385868, -0.16251‚Ä¶ #> $ VehBrand   <dbl> -0.064572781, -0.135160044, -0.045930814, 0.217378125, -0.0‚Ä¶ #> $ VehGas     <dbl> 0.12823768, -0.07338144, -0.10266579, 0.12322538, -0.083513‚Ä¶ #> $ Density    <dbl> 0.025053905, -0.047225937, 0.105588980, -0.338130653, -0.33‚Ä¶ #> $ Region     <dbl> -0.080178186, -0.005250387, 0.002464997, -0.159340948, 0.00‚Ä¶ #> $ BIAS       <dbl> -0.0860344, -0.0860344, -0.0860344, -0.0860344, -0.0860344,‚Ä¶ ex$beta_corrections |> dplyr::glimpse() #> Rows: 1,504 #> Columns: 47 #> $ bias          <dbl> 0.042203277, -0.091284789, -0.086034402, 0.095228150, -0‚Ä¶ #> $ VehPower      <dbl> -0.0144321078, -0.0044473357, 0.0138730571, 0.0132096708‚Ä¶ #> $ VehAge        <dbl> 0.040716039, -0.239648849, -0.366303146, -0.235280246, 0‚Ä¶ #> $ DrivAge       <dbl> -1.511819e-04, -3.081408e-03, -3.407767e-04, -1.844031e-‚Ä¶ #> $ BonusMalus    <dbl> -0.0023697652, -0.0003613200, -0.0018031606, 0.000840245‚Ä¶ #> $ Density       <dbl> 2.753176e-04, -4.036405e-04, 1.708560e-04, -2.075567e-05‚Ä¶ #> $ AreaA         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ AreaB         <dbl> -0.004420592, 0.000000000, 0.000000000, 0.000000000, -0.‚Ä¶ #> $ AreaC         <dbl> 0.0000000000, 0.0071678688, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ AreaD         <dbl> 0.0000000000, 0.0000000000, 0.0012779103, 0.0000000000, ‚Ä¶ #> $ AreaE         <dbl> 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00, ‚Ä¶ #> $ AreaF         <dbl> 0.00000000, 0.00000000, 0.00000000, -0.00175253, 0.00000‚Ä¶ #> $ VehBrandB1    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB10   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB11   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB12   <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ VehBrandB13   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB14   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB2    <dbl> -0.06457278, -0.13516004, 0.00000000, 0.00000000, 0.0000‚Ä¶ #> $ VehBrandB3    <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, -0.07953‚Ä¶ #> $ VehBrandB4    <dbl> 0.00000000, 0.00000000, -0.04593081, 0.00000000, 0.00000‚Ä¶ #> $ VehBrandB5    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB6    <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ VehGasDiesel  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehGasRegular <dbl> 0.00000000, -0.07338144, -0.10266579, 0.00000000, -0.083‚Ä¶ #> $ RegionR11     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR21     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR22     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR23     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR24     <dbl> -0.08017819, 0.00000000, 0.00000000, 0.00000000, 0.00000‚Ä¶ #> $ RegionR25     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR26     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR31     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR41     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR42     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR43     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR52     <dbl> 0.000000000, 0.000000000, 0.002464997, 0.000000000, 0.00‚Ä¶ #> $ RegionR53     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR54     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR72     <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ RegionR73     <dbl> 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0‚Ä¶ #> $ RegionR74     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR82     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR83     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR91     <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ RegionR93     <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ RegionR94     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ ex$data_beta_coeff |> dplyr::glimpse() #> Rows: 1,504 #> Columns: 10 #> $ bias       <dbl> -4.305032, -4.438520, -4.433270, -4.252007, -4.433270, -4.3‚Ä¶ #> $ Area       <dbl> 0.37389148, -0.09154975, 0.41787888, 0.04498706, 0.37481382‚Ä¶ #> $ VehPower   <dbl> 0.04248389, 0.05246866, 0.07078905, 0.07012567, 0.04787412,‚Ä¶ #> $ VehAge     <dbl> 0.007728552, -0.272636336, -0.399290633, -0.268267733, -0.0‚Ä¶ #> $ DrivAge    <dbl> 8.866556e-04, -2.043571e-03, 6.970608e-04, -8.061930e-04, 1‚Ä¶ #> $ BonusMalus <dbl> 0.01372281, 0.01573125, 0.01428941, 0.01693282, 0.01284231,‚Ä¶ #> $ VehBrand   <dbl> 0.28343155, 0.21284429, 0.03766011, 0.00000000, 0.89242232,‚Ä¶ #> $ VehGas     <dbl> 0.0000000, 0.4848541, 0.4555698, 0.0000000, 0.4747220, 0.35‚Ä¶ #> $ Density    <dbl> 3.023233e-04, -3.766349e-04, 1.978616e-04, 6.249949e-06, -5‚Ä¶ #> $ Region     <dbl> 0.5671148, 0.0000000, 0.3518293, 0.0000000, 0.6259113, 0.59‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"function extract SHAP (SHapley Additive exPlanations) values fitted booster model","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"","code":"extract_booster_shap(booster_model, data, ...)  # S3 method for class 'xgb.Booster' extract_booster_shap(booster_model, data, ...)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"booster_model model object. IBLM context \"booster_model\" item object class \"iblm\" data data frame containing predictor variables. Note anything extra quietly dropped. ... Additional arguments passed methods.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"data frame SHAP values, column corresponds feature   row corresponds observation.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"Currently booster_model class `xgb.Booster` supported","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":"methods-by-class-","dir":"Reference","previous_headings":"","what":"Methods (by class)","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"extract_booster_shap(xgb.Booster): Extract SHAP values `xgb.Booster` model","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/extract_booster_shap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract SHAP values from an xgboost Booster model ‚Äî extract_booster_shap","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  booster_shap <- extract_booster_shap(iblm_model$booster_model, df_list$test)  booster_shap |> dplyr::glimpse() #> Rows: 1,539 #> Columns: 10 #> $ Area       <dbl> -4.735535e-03, -3.238675e-03, -4.799713e-03, -4.584781e-03,‚Ä¶ #> $ VehPower   <dbl> 0.024275888, -0.130052105, 0.005393370, 0.189520866, -0.005‚Ä¶ #> $ VehAge     <dbl> -0.081090577, -0.283407420, -0.035037734, 0.008984059, -0.0‚Ä¶ #> $ DrivAge    <dbl> -0.005124214, -0.052051414, -0.028855417, 0.178472668, 0.17‚Ä¶ #> $ BonusMalus <dbl> 0.128396869, -0.041644566, 0.003435247, 0.410187334, -0.056‚Ä¶ #> $ VehBrand   <dbl> -0.016057424, -0.236917883, 0.108801149, 0.377289325, -0.36‚Ä¶ #> $ VehGas     <dbl> -0.034826107, 0.017087918, -0.020408211, 0.170470521, -0.14‚Ä¶ #> $ Density    <dbl> -0.046452142, -0.204212800, -0.114889175, 0.054637183, -0.0‚Ä¶ #> $ Region     <dbl> -0.0357493870, 0.0288833044, -0.1537512392, -0.0004824707, ‚Ä¶ #> $ BIAS       <dbl> -0.0915457, -0.0915457, -0.0915457, -0.0915457, -0.0915457,‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/freMTPL2freq.html","id":null,"dir":"Reference","previous_headings":"","what":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","title":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","text":"dataset containing information French motor insurance policies claims, commonly used actuarial modeling risk assessment studies. **IMPORTANT**: dataset based commit \"c49cbbb37235fc49616cac8ccac32e1491cdc619\" CASdatasets multiple versions dataset circulating online, weary comparing versions `freMTPL2freq`","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/freMTPL2freq.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","text":"","code":"freMTPL2freq"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/freMTPL2freq.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","text":"data frame 677,991 rows 10 variables: ClaimRate Number claims made, annualised rate (numeric) VehPower Vehicle power rating engine horsepower category (integer) VehAge Age vehicle years (integer) DrivAge Age driver years (integer) BonusMalus Bonus-malus coefficient, rating factor used French     insurance lower values indicate better driving records (integer) VehBrand Vehicle brand/manufacturer code (factor levels like B6, B12, etc.) VehGas Type fuel used vehicle (factor levels: Regular, Diesel) Area Area classification policy holder resides     (factor levels F) Density Population density area policy holder lives     (integer, inhabitants per square kilometer) Region French administrative region policy holder resides     (factor regions like Rhone-Alpes, Picardie, Aquitaine, etc.)","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/freMTPL2freq.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","text":"['https://github.com/dutangc/CASdatasets/blob/master/data/freMTPL2freq.rda']","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/freMTPL2freq.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","text":"dataset frequently used actuarial science insurance analytics modeling claim frequency severity. ClaimRate variable represents response (.e. number claims, annualised) variables serve potential predictors risk assessment. BonusMalus system characteristic feature French motor insurance, coefficients typically range 50 (best) 100 (worst), reflecting policyholder's claims history.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/freMTPL2freq.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"French Motor Insurance Claims Dataset ‚Äî freMTPL2freq","text":"","code":"head(freMTPL2freq) #>        Area VehPower VehAge DrivAge BonusMalus VehBrand  VehGas Density Region #> 412456    E       10     14      60         50       B2 Regular    5539    R11 #> 117738    E        6      4      50         53       B1 Regular    4579    R93 #> 116954    C        7      2      37         50       B3 Regular     155    R24 #> 210876    E       11      1      58         50      B12  Diesel    3301    R73 #> 640365    B        8      1      29         64      B12 Regular      51    R24 #> 153388    A        7      1      28         57       B3  Diesel      37    R11 #>        ClaimRate #> 412456         0 #> 117738         0 #> 116954         0 #> 210876         0 #> 640365         0 #> 153388         0"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/get_pinball_scores.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","title":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","text":"Computes Poisson deviance pinball scores IBLM model alongside homogeneous, GLM, optional additional models.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/get_pinball_scores.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","text":"","code":"get_pinball_scores(   data,   iblm_model,   trim = NA_real_,   additional_models = list() )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/get_pinball_scores.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","text":"data Data frame. used `split_into_train_validate_test()` \"test\" portion data. iblm_model Fitted IBLM model object class \"iblm\" trim Numeric trimming parameter IBLM predictions. Default `NA_real_`. additional_models (Named) list fitted models comparison. models MUST fitted data `iblm_model` sensible results. unnamed, models labeled class.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/get_pinball_scores.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","text":"Data frame 3 columns: \"model\" - homog, glm, iblm models specified `additional_models` \"`family`_deviance\" - value loss function based family glm function \"pinball_score\" - positive score, better model basic homog model (.e. predictions mean value). negative score indicates worse homog model.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/get_pinball_scores.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","text":"Pinball scores calculated relative homogeneous model (.e. simple mean prediction training data). Higher scores indicate better predictive performance.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/get_pinball_scores.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Pinball Scores for IBLM and Additional Models ‚Äî get_pinball_scores","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  get_pinball_scores(data = df_list$test, iblm_model = iblm_model) #>   model poisson_deviance pinball_score #> 1 homog         1.275010    0.00000000 #> 2   glm         1.249846    0.01973653 #> 3  iblm         1.231372    0.03422568"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/overall_correction.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Overall Corrections from Booster Component ‚Äî overall_correction","title":"Plot Overall Corrections from Booster Component ‚Äî overall_correction","text":"Creates visualization showing record overall booster component (either multiplicative additive) NOTE function signature documents interface functions created create_overall_correction.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/overall_correction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Overall Corrections from Booster Component ‚Äî overall_correction","text":"","code":"overall_correction(transform_x_scale_by_link = TRUE)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/overall_correction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Overall Corrections from Booster Component ‚Äî overall_correction","text":"transform_x_scale_by_link TRUE/FALSE, whether transform x axis link function","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/overall_correction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Overall Corrections from Booster Component ‚Äî overall_correction","text":"ggplot2 object.","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/overall_correction.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Overall Corrections from Booster Component ‚Äî overall_correction","text":"","code":"# This function is created inside explain_iblm() and is output as an item  df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  explain_objects <- explain_iblm(iblm_model, df_list$test)  explain_objects$overall_correction()    # This function must be created, and cannot be called directly from the package try( overall_correction() ) #> Error in overall_correction() :  #>   This function documents the interface only and cannot be called #> directly. Instead, try one of the following #> ‚Ñπ Use explain_iblm()$overall_correction() #> ‚Ñπ Call a function output from create_overall_correction()"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/predict.iblm.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict Method for IBLM ‚Äî predict.iblm","title":"Predict Method for IBLM ‚Äî predict.iblm","text":"function generates predictions ensemble model consisting GLM XGBoost model.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/predict.iblm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict Method for IBLM ‚Äî predict.iblm","text":"","code":"# S3 method for class 'iblm' predict(object, newdata, trim = NA_real_, type = \"response\", ...)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/predict.iblm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict Method for IBLM ‚Äî predict.iblm","text":"object object class 'iblm'. output `train_iblm_xgb()` newdata data frame matrix containing predictor variables predictions desired. Must structure training data used fit 'iblm' model. trim Numeric value post-hoc truncating XGBoost predictions. NA (default) trimming applied. type string, defines type argument used GLM/Booster Currently \"response\" supported ... additional arguments affecting predictions produced.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/predict.iblm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict Method for IBLM ‚Äî predict.iblm","text":"numeric vector ensemble predictions computed element-wise   product GLM response probabilities (optionally trimmed) XGBoost   predictions.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/predict.iblm.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Predict Method for IBLM ‚Äî predict.iblm","text":"prediction process involves following steps: Generate GLM predictions Generate Booster predictions trimming specified, apply booster predictions Combine GLM Booster predictions per \"relationship\" described within iblm model object point, iblm model \"booster_model\" object class `xgb.Booster` supported","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/predict.iblm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict Method for IBLM ‚Äî predict.iblm","text":"","code":"data <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   data,   response_var = \"ClaimRate\",   family = \"poisson\" )  predictions <- predict(iblm_model, data$test)  predictions |> dplyr::glimpse() #>  num [1:1491] 0.0841 0.0486 0.1903 0.1066 0.1017 ..."},{"path":"https://ifoa-adswp.github.io/IBLM/reference/shap_to_onehot.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Shap values to Wide One-Hot Encoded Format ‚Äî shap_to_onehot","title":"Convert Shap values to Wide One-Hot Encoded Format ‚Äî shap_to_onehot","text":"Transforms categorical variables data frame one-hot encoded format. Renames \"BIAS\" lowercase.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/shap_to_onehot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Shap values to Wide One-Hot Encoded Format ‚Äî shap_to_onehot","text":"","code":"shap_to_onehot(shap, wide_input_frame, iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/shap_to_onehot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Shap values to Wide One-Hot Encoded Format ‚Äî shap_to_onehot","text":"shap Data frame containing raw SHAP values XGBoost. wide_input_frame Wide format input data frame (one-hot encoded). iblm_model Object class 'iblm'","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/shap_to_onehot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Shap values to Wide One-Hot Encoded Format ‚Äî shap_to_onehot","text":"data frame SHAP values wide format categorical variables. Column \"bias\" moved start.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/shap_to_onehot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Shap values to Wide One-Hot Encoded Format ‚Äî shap_to_onehot","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  shap <- stats::predict(   iblm_model$booster_model,   newdata = xgboost::xgb.DMatrix(     data.matrix(       dplyr::select(df_list$test, -dplyr::all_of(iblm_model$response_var))     )   ),   predcontrib = TRUE ) |> data.frame()  wide_input_frame <- data_to_onehot(df_list$test, iblm_model)  shap_wide <- shap_to_onehot(shap, wide_input_frame, iblm_model)  shap_wide |> dplyr::glimpse() #> Rows: 1,469 #> Columns: 47 #> $ bias          <dbl> -0.02351865, -0.02351865, -0.02351865, -0.02351865, -0.0‚Ä¶ #> $ VehPower      <dbl> -0.0063561322, -0.0011777661, 0.0003251252, 0.0015906439‚Ä¶ #> $ VehAge        <dbl> -0.065488391, 0.026167748, 0.025872132, 0.008748739, 0.0‚Ä¶ #> $ DrivAge       <dbl> -1.792123e-05, -1.285337e-02, -1.100673e-03, -9.465046e-‚Ä¶ #> $ BonusMalus    <dbl> -9.373153e-05, 4.326527e-03, 8.512905e-03, 2.592850e-02,‚Ä¶ #> $ Density       <dbl> 0.0190027822, -0.0042668926, -0.0037577311, -0.079070933‚Ä¶ #> $ AreaA         <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0023377235, ‚Ä¶ #> $ AreaB         <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ AreaC         <dbl> 0.000000000, 0.002840332, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ AreaD         <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ AreaE         <dbl> -0.001139728, 0.000000000, -0.002110158, 0.000000000, 0.‚Ä¶ #> $ AreaF         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB1    <dbl> 0.01248787, 0.00000000, 0.00000000, 0.01420077, 0.000000‚Ä¶ #> $ VehBrandB10   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB11   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB12   <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ VehBrandB13   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehBrandB14   <dbl> 0.00000000, -0.02070415, 0.00000000, 0.00000000, 0.00000‚Ä¶ #> $ VehBrandB2    <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, -0.0‚Ä¶ #> $ VehBrandB3    <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ VehBrandB4    <dbl> 0.00000000, 0.00000000, -0.02890465, 0.00000000, 0.00000‚Ä¶ #> $ VehBrandB5    <dbl> 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.000000‚Ä¶ #> $ VehBrandB6    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ VehGasDiesel  <dbl> 0.0000000000, 0.0009993135, -0.0030604433, 0.0003664351,‚Ä¶ #> $ VehGasRegular <dbl> 0.0015866732, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ RegionR11     <dbl> 0.000000000, 0.000000000, 0.000000000, 0.000000000, 0.00‚Ä¶ #> $ RegionR21     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR22     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR23     <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ RegionR24     <dbl> 0.000000e+00, 0.000000e+00, 0.000000e+00, -2.760023e-05,‚Ä¶ #> $ RegionR25     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR26     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR31     <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ RegionR41     <dbl> 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00, ‚Ä¶ #> $ RegionR42     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR43     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR52     <dbl> 0.000000e+00, 3.406901e-04, -1.040776e-04, 0.000000e+00,‚Ä¶ #> $ RegionR53     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR54     <dbl> 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00, ‚Ä¶ #> $ RegionR72     <dbl> 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00, ‚Ä¶ #> $ RegionR73     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR74     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR82     <dbl> 0.0000000000, 0.0000000000, 0.0000000000, 0.0000000000, ‚Ä¶ #> $ RegionR83     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶ #> $ RegionR91     <dbl> 0.000000e+00, 0.000000e+00, 0.000000e+00, 0.000000e+00, ‚Ä¶ #> $ RegionR93     <dbl> -0.0018155457, 0.0000000000, 0.0000000000, 0.0000000000,‚Ä¶ #> $ RegionR94     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/split_into_train_validate_test.html","id":null,"dir":"Reference","previous_headings":"","what":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","title":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","text":"function randomly splits data frame three subsets machine learning workflows: training, validation, test sets. proportions can customized must sum 1.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/split_into_train_validate_test.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","text":"","code":"split_into_train_validate_test(   df,   train_prop = 0.7,   validate_prop = 0.15,   test_prop = 0.15,   seed = NULL )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/split_into_train_validate_test.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","text":"df data frame split subsets. train_prop numeric value 0 1 specifying proportion data allocate training set. validate_prop numeric value 0 1 specifying proportion data allocate validation set. test_prop numeric value 0 1 specifying proportion data allocate test set. seed (optional) numeric value set random . seed within function environment.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/split_into_train_validate_test.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","text":"named list three elements: train data frame containing training subset validate data frame containing validation subset test data frame containing test subset","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/split_into_train_validate_test.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","text":"function assigns row either \"train\", \"validate\" \"test\" probability defined function. row assigned bucket independently, small datasets proportions may desired. issue data used `iblm` must reasonably large.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/split_into_train_validate_test.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Split Dataframe into: 'train', 'validate', 'test' ‚Äî split_into_train_validate_test","text":"","code":"# Using 'mtcars' split_into_train_validate_test(   mtcars,   train_prop = 0.6,   validate_prop = 0.2,   test_prop = 0.2,   seed = 9000 ) #> $train #>                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb #> Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4 #> Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1 #> Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4 #> Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2 #> Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4 #> Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3 #> Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3 #> Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4 #> Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4 #> Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1 #> Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1 #> Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2 #> AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2 #> Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4 #> Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2 #> Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1 #> Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4 #> Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6 #> Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8 #>  #> $validate #>                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb #> Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2 #> Lotus Europa      30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2 #> Volvo 142E        21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2 #>  #> $test #>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb #> Mazda RX4          21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4 #> Datsun 710         22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1 #> Hornet 4 Drive     21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1 #> Merc 240D          24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2 #> Merc 280C          17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4 #> Merc 450SLC        15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3 #> Cadillac Fleetwood 10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4 #> Honda Civic        30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2 #> Toyota Corolla     33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1 #> Porsche 914-2      26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2 #>"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/theme_iblm.html","id":null,"dir":"Reference","previous_headings":"","what":"Custom ggplot2 Theme for IBLM ‚Äî theme_iblm","title":"Custom ggplot2 Theme for IBLM ‚Äî theme_iblm","text":"Custom ggplot2 Theme IBLM","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/theme_iblm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Custom ggplot2 Theme for IBLM ‚Äî theme_iblm","text":"","code":"theme_iblm()"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/theme_iblm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Custom ggplot2 Theme for IBLM ‚Äî theme_iblm","text":"ggplot2 theme object can added plots.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_iblm_xgb.html","id":null,"dir":"Reference","previous_headings":"","what":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","title":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","text":"function trains interpretable boosted linear model. function combines Generalized Linear Model (GLM) booster model XGBoost \"booster\" model trained : - actual responses / GLM predictions, link function log - actual responses - GLM predictions, link function identity","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_iblm_xgb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","text":"","code":"train_iblm_xgb(   df_list,   response_var,   family = \"poisson\",   params = list(),   nrounds = 1000,   obj = NULL,   feval = NULL,   verbose = 0,   print_every_n = 1L,   early_stopping_rounds = 25,   maximize = NULL,   save_period = NULL,   save_name = \"xgboost.model\",   xgb_model = NULL,   callbacks = list(),   ...,   strip_glm = TRUE )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_iblm_xgb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","text":"df_list named list containing training validation datasets. Must elements named \"train\" \"validate\", containing df_list frames structure. item naturally output function [split_into_train_validate_test()] response_var Character string specifying name response variable column datasets. string MUST appear `df_list$train` `df_list$validate`. family Character string specifying distributional family model. Currently \"poisson\", \"gamma\", \"tweedie\" \"gaussian\" fully supported. See details impacts fitting. params Named list additional parameters pass xgb.train. Note train_iblm_xgb select \"objective\" \"base_score\" depending `family` (see details section). However may overwrite (caution) nrounds, obj, feval, verbose, print_every_n, early_stopping_rounds, maximize, save_period, save_name, xgb_model, callbacks, ... passed directly xgb.train strip_glm TRUE/FALSE, whether strip superfluous data `glm_model` object saved within `iblm` class output. serves reduce memory constraints.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_iblm_xgb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","text":"object class \"iblm\" containing: glm_model GLM model object, fitted `df_list$train` data provided booster_model booster model object, trained residuals leftover glm_model data list containing data used train validate iblm model relationship String explains combine `glm_model` `booster_model`. Currently either \"Additive\" \"Multiplicative\" response_var string describing response variable used iblm model predictor_vars list describing predictor variables used iblm model cat_levels list describing categorical levels predictor vars coeff_names list describing coefficient names","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_iblm_xgb.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","text":"`family` argument fed GLM fitting. Default values XGBoost fitting also selected based family. Note: xgboost configuration overwritten explicit arguments input via `params` \"poisson\" family link function 'log' XGBoost configured : objective: \"count:poisson\" base_score: 1 \"gamma\" family link function 'log' XGBoost configured : objective: \"reg:gamma\" base_score: 1 \"tweedie\" family link function 'log' (var.power = 1.5) XGBoost configured : objective: \"reg:tweedie\" base_score: 1 tweedie_variance_power = 1.5 \"gaussian\" family link function 'identity' XGBoost configured : objective: \"reg:squarederror\" base_score: 0","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_iblm_xgb.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Train IBLM Model on XGBoost ‚Äî train_iblm_xgb","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_xgb_as_per_iblm.html","id":null,"dir":"Reference","previous_headings":"","what":"Train XGBoost Model Using the IBLM Model Parameters ‚Äî train_xgb_as_per_iblm","title":"Train XGBoost Model Using the IBLM Model Parameters ‚Äî train_xgb_as_per_iblm","text":"Trains XGBoost model using parameters extracted booster residual component iblm model. convenient way fit XGBoost model direct comparison fitted iblm model","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_xgb_as_per_iblm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Train XGBoost Model Using the IBLM Model Parameters ‚Äî train_xgb_as_per_iblm","text":"","code":"train_xgb_as_per_iblm(   iblm_model,   xgb_additional_params = list(nrounds = 1000, verbose = 0, early_stopping_rounds = 25) )"},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_xgb_as_per_iblm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Train XGBoost Model Using the IBLM Model Parameters ‚Äî train_xgb_as_per_iblm","text":"iblm_model Ensemble model object class \"iblm\" containing GLM XGBoost model components. Also contains data used train . xgb_additional_params Named list XGBoost parameters. Defaults: nrounds = 1000, verbose = 0, early_stopping_rounds = 25.","code":""},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_xgb_as_per_iblm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Train XGBoost Model Using the IBLM Model Parameters ‚Äî train_xgb_as_per_iblm","text":"Trained XGBoost model object (class \"xgb.Booster\").","code":""},{"path":[]},{"path":"https://ifoa-adswp.github.io/IBLM/reference/train_xgb_as_per_iblm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Train XGBoost Model Using the IBLM Model Parameters ‚Äî train_xgb_as_per_iblm","text":"","code":"df_list <- freMTPL2freq |>   head(10000) |>   dplyr::mutate(ClaimRate = round(ClaimRate)) |>   split_into_train_validate_test()  iblm_model <- train_iblm_xgb(   df_list,   response_var = \"ClaimRate\",   family = \"poisson\" )  xgb <- train_xgb_as_per_iblm(iblm_model)"},{"path":"https://ifoa-adswp.github.io/IBLM/news/index.html","id":"iblm-100","dir":"Changelog","previous_headings":"","what":"IBLM 1.0.0","title":"IBLM 1.0.0","text":"Initial CRAN submission.","code":""}]
