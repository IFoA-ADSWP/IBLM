% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/explain.R
\name{beta_corrected_scatter}
\alias{beta_corrected_scatter}
\title{Create Scatter Plot of Beta Corrections for a Variable}
\usage{
beta_corrected_scatter(
  varname,
  q,
  color,
  marginal,
  excl_outliers,
  betas,
  cat_levels,
  wide_input_frame,
  beta_corrections,
  data,
  response_var,
  predictor_vars_categorical,
  predictor_vars_continuous,
  reference_levels,
  custom_colors,
  chart_theme,
  all_names,
  x
)
}
\arguments{
\item{varname}{Character. Name of the variable to plot SHAP corrections for.
Must be present in the fitted model.}

\item{q}{Numeric. Quantile threshold for outlier detection (when excl_outliers = TRUE).}

\item{color}{Character or NULL. Name of variable to use for point coloring.
Must be present in the model. Currently not supported for categorical variables.}

\item{marginal}{Logical. Whether to add marginal density plots (numerical variables only).}

\item{excl_outliers}{Logical. Whether to exclude outliers based on quantile method.}

\item{betas}{Named numeric vector. Model coefficients/betas from fitted model.}

\item{cat_levels}{Named list. Categorical variable levels.}

\item{wide_input_frame}{Data frame. Wide format input data used in model fitting.}

\item{beta_corrections}{Data frame. Wide format SHAP values corresponding to input data.}

\item{data}{Data frame. Original dataset containing variables for coloring.}

\item{response_var}{Character. Name of response_var/response variable.}

\item{reference_levels}{Character vector. Reference levels for categorical variables.}

\item{custom_colors}{Character vector. Custom color palette for plots.}

\item{chart_theme}{ggplot2 theme object. Theme to apply to the plot.}

\item{all_names}{Character vector. All variable names from the model.}

\item{x}{Model object containing the fitted GLM model (used for standard errors).}
}
\value{
A ggplot2 object. For numerical variables: scatter plot with SHAP corrections,
  model coefficient line, and confidence bands. For categorical variables: boxplot
  with coefficient points overlaid.
}
\description{
Generates a scatter plot or boxplot showing SHAP corrections for a specified variable from a fitted model.
For numerical variables, creates a scatter plot with optional coloring and marginal densities. For categorical
variables, creates a boxplot with model coefficients overlaid.
}
\details{
The function handles both numerical and categorical variables differently:
\itemize{
  \item Numerical: Creates scatter plot of variable values vs. beta + SHAP deviations
  \item Categorical: Creates boxplot of SHAP deviations for each level with coefficient overlay
}

For numerical variables, horizontal lines show the model coefficient (solid) and
confidence intervals (dashed). SHAP corrections represent local deviations from
the global model coefficient.
}
\keyword{internal}
