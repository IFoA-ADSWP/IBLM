% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/beta_correction_plot_functions.R
\name{beta_corrected_scatter}
\alias{beta_corrected_scatter}
\title{Create Scatter Plot of Beta Corrections for a Variable}
\usage{
beta_corrected_scatter(
  varname,
  q = 0,
  color = NULL,
  marginal = FALSE,
  data_beta_coeff,
  data,
  iblm_model
)
}
\arguments{
\item{varname}{Character. Name of the variable to plot SHAP corrections for.
Must be present in the fitted model.}

\item{q}{Numeric. Quantile threshold for outlier removal. When 0 (default) the function will not remove any outliers}

\item{color}{Character or NULL. Name of variable to use for point coloring.
Must be present in the model. Currently not supported for categorical variables.}

\item{marginal}{Logical. Whether to add marginal density plots (numerical variables only).}

\item{data_beta_coeff}{Dataframe, Contains the corrected beta coefficients for each row of the data}

\item{data}{Dataframe. The testing data.}

\item{iblm_model}{Object of class 'iblm'}
}
\value{
A ggplot2 object. For numerical variables: scatter plot with SHAP corrections,
  model coefficient line, and confidence bands. For categorical variables: boxplot
  with coefficient points overlaid.
}
\description{
Generates a scatter plot or boxplot showing SHAP corrections for a specified variable from a fitted model.
For numerical variables, creates a scatter plot with optional coloring and marginal densities. For categorical
variables, creates a boxplot with model coefficients overlaid.
}
\details{
The function handles both numerical and categorical variables differently:
\itemize{
  \item Numerical: Creates scatter plot of variable values vs. beta + SHAP deviations
  \item Categorical: Creates boxplot of SHAP deviations for each level with coefficient overlay
}

For numerical variables, horizontal lines show the model coefficient (solid) and
confidence intervals (dashed). SHAP corrections represent local deviations from
the global model coefficient.
}
\keyword{internal}
