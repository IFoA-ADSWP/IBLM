% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/explain_iblm.R
\name{explain_iblm}
\alias{explain_iblm}
\title{Explain GLM Model Predictions Using SHAP Values}
\usage{
explain_iblm(iblm_model, data, migrate_reference_to_bias = TRUE)
}
\arguments{
\item{iblm_model}{An object of class 'iblm'. This should be output by `train_iblm()`}

\item{data}{Data frame.

If you have used `split_into_train_validate_test()` this will be the "test" portion of your data.}

\item{migrate_reference_to_bias}{TRUE/FALSE, should shap corrections for reference levels be moved to the bias values instead?}
}
\value{
A list containing:
\describe{
  \item{beta_corrected_scatter}{Function to create scatter plots showing SHAP corrections vs variable values (see \code{\link[IBLMpackage]{beta_corrected_scatter}})}
  \item{beta_corrected_density}{Function to create density plots of SHAP corrections for variables (see \code{\link[IBLMpackage]{beta_corrected_density}})}
  \item{bias_density}{List containing intercept correction visualizations}
  \item{overall_correction}{Function to show global correction distributions (see \code{\link[IBLMpackage]{overall_correction}})}
  \item{input_frame}{Original input data frame}
  \item{beta_corrections}{Wide format SHAP corrections data frame}
  \item{shap}{Raw SHAP values from XGBoost}
  \item{ glm_beta_coeff}{GLM model coefficients}
  \item{allnames}{Names of all model coefficients except intercept}
}
}
\description{
Creates a list that explains the beta values, and their corrections, of the ensemble IBLM model
}
\details{
The function processes both continuous and categorical variables, handles
reference levels for factors, and applies corrections to account for zero values
and categorical reference categories. The resulting explainer provides multiple
visualization methods to understand how SHAP values modify GLM predictions.
}
\examples{
df_list <- freMTPL2freq |>
  head(10000) |>
  dplyr::mutate(ClaimRate = round(ClaimRate)) |>
  split_into_train_validate_test()

iblm_model <- train_iblm(
  df_list,
  response_var = "ClaimRate",
  family = "poisson"
)

explain_iblm(iblm_model, df_list$test)

}
